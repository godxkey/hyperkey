[gd_scene load_steps=24 format=2]

[ext_resource path="res://texture/WhiteSquare.png" type="Texture" id=1]
[ext_resource path="res://actor/ability/TimeStream.gd" type="Script" id=2]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 640, 32 )

[sub_resource type="VisualShaderNodeScalarOp" id=2]
output_port_for_preview = 0
default_input_values = [ 0, 0.0, 1, 30.0 ]
operator = 2

[sub_resource type="VisualShaderNodeScalarFunc" id=3]
output_port_for_preview = 0
function = 0

[sub_resource type="VisualShaderNodeScalarOp" id=4]
output_port_for_preview = 0

[sub_resource type="VisualShaderNodeInput" id=5]
input_name = "time"

[sub_resource type="VisualShaderNodeScalarOp" id=6]
default_input_values = [ 0, 0.0, 1, 2.0 ]
operator = 2

[sub_resource type="VisualShaderNodeInput" id=7]
output_port_for_preview = 0
input_name = "uv"

[sub_resource type="VisualShaderNodeVectorDecompose" id=8]

[sub_resource type="VisualShaderNodeInput" id=9]
output_port_for_preview = 0
input_name = "uv"

[sub_resource type="VisualShaderNodeScalarOp" id=10]
output_port_for_preview = 0
default_input_values = [ 0, 0.0, 1, 0.2 ]
operator = 2

[sub_resource type="VisualShaderNodeScalarOp" id=11]
output_port_for_preview = 0
default_input_values = [ 0, 0.0, 1, 0.4 ]

[sub_resource type="VisualShaderNodeVectorDecompose" id=12]

[sub_resource type="VisualShaderNodeScalarSmoothStep" id=13]
output_port_for_preview = 0
default_input_values = [ 0, 0.0, 1, 1.0, 2, 0.0 ]

[sub_resource type="VisualShaderNodeColorUniform" id=14]
uniform_name = "StreamColor"

[sub_resource type="VisualShader" id=15]
code = "shader_type canvas_item;
uniform vec4 StreamColor : hint_color;



void vertex() {
// Output:0

}

void fragment() {
// ColorUniform:7
	vec3 n_out7p0 = StreamColor.rgb;
	float n_out7p1 = StreamColor.a;

// Input:2
	vec3 n_out2p0 = vec3(UV, 0.0);

// VectorDecompose:3
	float n_out3p0 = n_out2p0.x;
	float n_out3p1 = n_out2p0.y;
	float n_out3p2 = n_out2p0.z;

// ScalarOp:10
	float n_in10p1 = 30.00000;
	float n_out10p0 = n_out3p0 * n_in10p1;

// Input:16
	float n_out16p0 = TIME;

// ScalarOp:17
	float n_in17p1 = 2.00000;
	float n_out17p0 = n_out16p0 * n_in17p1;

// ScalarOp:15
	float n_out15p0 = n_out10p0 + n_out17p0;

// ScalarFunc:11
	float n_out11p0 = sin(n_out15p0);

// ScalarOp:20
	float n_in20p1 = 0.20000;
	float n_out20p0 = n_out11p0 * n_in20p1;

// ScalarOp:21
	float n_in21p1 = 0.40000;
	float n_out21p0 = n_out20p0 + n_in21p1;

// ScalarSmoothStep:4
	float n_in4p0 = 0.00000;
	float n_in4p1 = 1.00000;
	float n_out4p0 = smoothstep(n_in4p0, n_in4p1, n_out21p0);

// Output:0
	COLOR.rgb = n_out7p0;
	COLOR.a = n_out4p0;

}

void light() {
// Output:0

}
"
graph_offset = Vector2( -825, -152 )
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2( 1100, -100 )
nodes/fragment/2/node = SubResource( 9 )
nodes/fragment/2/position = Vector2( -1080, -140 )
nodes/fragment/3/node = SubResource( 12 )
nodes/fragment/3/position = Vector2( -880, -140 )
nodes/fragment/4/node = SubResource( 13 )
nodes/fragment/4/position = Vector2( 480, -120 )
nodes/fragment/7/node = SubResource( 14 )
nodes/fragment/7/position = Vector2( 840, -280 )
nodes/fragment/10/node = SubResource( 2 )
nodes/fragment/10/position = Vector2( -640, -160 )
nodes/fragment/11/node = SubResource( 3 )
nodes/fragment/11/position = Vector2( -200, -100 )
nodes/fragment/15/node = SubResource( 4 )
nodes/fragment/15/position = Vector2( -400, -80 )
nodes/fragment/16/node = SubResource( 5 )
nodes/fragment/16/position = Vector2( -920, 120 )
nodes/fragment/17/node = SubResource( 6 )
nodes/fragment/17/position = Vector2( -720, 100 )
nodes/fragment/18/node = SubResource( 7 )
nodes/fragment/18/position = Vector2( -380, 260 )
nodes/fragment/19/node = SubResource( 8 )
nodes/fragment/19/position = Vector2( -200, 260 )
nodes/fragment/20/node = SubResource( 10 )
nodes/fragment/20/position = Vector2( 20, -120 )
nodes/fragment/21/node = SubResource( 11 )
nodes/fragment/21/position = Vector2( 200, -100 )
nodes/fragment/connections = PoolIntArray( 2, 0, 3, 0, 7, 0, 0, 0, 3, 0, 10, 0, 10, 0, 15, 0, 16, 0, 17, 0, 17, 0, 15, 1, 18, 0, 19, 0, 15, 0, 11, 0, 11, 0, 20, 0, 20, 0, 21, 0, 21, 0, 4, 2, 4, 0, 0, 1 )

[sub_resource type="ShaderMaterial" id=16]
shader = SubResource( 15 )
shader_param/StreamColor = Color( 0.65098, 0.411765, 1, 1 )

[sub_resource type="Curve" id=17]
max_value = 100.0
_data = [ Vector2( 0, 0 ), 0.0, 140.0, 0, 0, Vector2( 1, 100 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=18]
curve = SubResource( 17 )

[sub_resource type="Curve" id=19]
_data = [ Vector2( 0, 1 ), 0.0, 0.0, 0, 0, Vector2( 1, 0.422727 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=20]
curve = SubResource( 19 )

[sub_resource type="ParticlesMaterial" id=21]
emission_shape = 2
emission_box_extents = Vector3( 500, 1, 1 )
flag_disable_z = true
direction = Vector3( 0, 1, 0 )
spread = 0.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 100.0
orbit_velocity = 0.0
orbit_velocity_random = 0.0
damping_curve = SubResource( 18 )
scale = 2.0
scale_curve = SubResource( 20 )
color = Color( 0.819608, 0.756863, 1, 1 )

[node name="TimeStream" type="Area2D"]
script = ExtResource( 2 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
material = SubResource( 16 )
scale = Vector2( 20, 1 )
texture = ExtResource( 1 )

[node name="Particles2D" type="Particles2D" parent="."]
position = Vector2( 0, -32 )
amount = 32
process_material = SubResource( 21 )

[node name="Timer" type="Timer" parent="."]
[connection signal="area_entered" from="." to="." method="_on_TimeStream_area_entered"]
[connection signal="area_exited" from="." to="." method="_on_TimeStream_area_exited"]
[connection signal="timeout" from="Timer" to="." method="_on_Timer_timeout"]
